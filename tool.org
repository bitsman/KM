#+title: 工具
#+author: 比克曼
#+latex_class: org-latex-pdf 
#+latex: \newpage 

* emacs
** 安装
- gnuserv安装：将emacs目录拷贝后，在系统环境变量中增加HOME键值等于emacs路径(d:\emacs)，即可；
** 基本操作
*** 按键命令
- 按键自定义方式
  1. 定义全局按键
     #+begin_src lisp
     (global-set-key "\M-;" 'qiang-comment-dwim-line)
     #+end_src
  2. 定义模式相关的快捷键：如下定义一个快捷键，只有在org-mode中起作用
     #+begin_src lisp
     (define-key org-mode-map (kbd "C-S-a") 'org-archive-subtree)
     #+end_src
  3. 同一个按键适用于多个模式：表示只在text-mode和org-mode里打开flyspell的功能，并且绑定了C-c C-v按键，这里用到了 dolist
     函数来遍历需要设置的mode      
     #+begin_src lisp
     (dolist (hook '(text-mode-hook org-mode-hook))
              (add-hook hook
                    (lambda ()
                        (flyspell-mode 1)
                        (local-set-key (kbd "C-c C-v") flyspell-goto-next-error))))
     #+end_src
  4. 使用local-set-key做局部绑定，暂定；
- 定义自己的M-x指令：如下指令进行M-x gtd，可以打开相应的文件；
  #+begin_src lisp
   (defun gtd ()
    (interactive)
    (find-file "c:/homes/charles/gtd/gtd/mygtd.org"))
  #+end_src
- 表格\ref{tbl-emacs-inf}总结了平时需要的快捷键、模式、命令等操作；
  #+caption: emacs使用汇总
  #+label: tbl-emacs-inf
  #+attr_latex: placement=[H]
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  | 模式     | 按键      | 函数                           | 功能                             | 备注               |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          | C-c a     | org-agenda                     | 进入org模式的agenda              |                    |
  |          | C-c b     | org-iswitchb                   | 进入org模式的iswitchb            |                    |
  |          | C-c c     | org-capture                    | 进入org模式的capture             |                    |
  |          | C-c l     | org-store-link                 | 进入org模式的org-store-link      |                    |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          | F9        | emacs-maximize                 | 窗口最大化                       | 实际上延时后最大化 |
  |          | C-F9      | emacs-normal                   | 窗口大小还原                     |                    |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          | C-x 4 4   | split-window-h2v2              | 窗口分成4份，水平2份垂直2份      |                    |
  |          | C-x 4 3   | split-window-h2v1              | 窗口分成3份，水平2份垂直1份      |                    |
  |          | C-x 4 5   | split-window-h1v2              | 窗口分成3份，水平1份垂直2份      |                    |
  |          | M-j       | split-window-rotate            | 窗口顺时针旋转                   |                    |
  |          | M-S-j     | split-window-hv-turn           | 窗口逆时针旋转                   |                    |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          | M-g       | goto-line                      | 跳转到某行                       |                    |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          | C-,       | scroll-left                    | 屏幕左移命令                     |                    |
  |          | C-.       | scroll-right                   | 屏幕右移命令                     |                    |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          | F3        | repeat-complex-command         | 重复上一命令                     |                    |
  |          | C-x z     |                                |                                  |                    |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          | F8        | eshell                         | 打开eshell                       |                    |
  |          | C-F8      | open-eshell-other-buffer       | 在另一个buffer里面打开eshell     |                    |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          | C-;       | set-mark-command               | 设置标记起始位置                 | 原来绑定在C-SPC上  |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          | F2        | ecb-hide-ecb-windows           | ecb模式窗口隐藏                  |                    |
  |          | C-F2      | ecb-show-ecb-windows           | ecb模式窗口显示                  |                    |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          | M-;       | user-comment-dwim-line         | 代码注释                         |                    |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          | F7        | quick-compile                  | 编译                             | 设置编译C          |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          | F10       | my-transparent                 | 设置或者取消emacs透明            |                    |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          | C-c 1     | org-time-stamp                 | org模式时间戳                    |                    |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          | C-c d     | insert-current-date            | 插入当前日期                     |                    |
  |          | C-c t     | insert-current-time            | 插入当前时间                     |                    |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          | C-F1      | manual-entry                   | 进入manual                       |                    |
  |          | F1        | open-key-info-file             | 进入自定义快捷键帮助             |                    |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          |           | byte-compile-file              | 编译elisp文件                    |                    |
  |          |           | describe-current-coding-system | 显示当前buffer的编码格式         |                    |
  |          | C-x RET f |                                | 改变当前buffer的编码格式         |                    |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          | C-x {     |                                | 往左加宽buffer尺寸               |                    |
  |          | C-x }     |                                | 往右加宽buffer尺寸               |                    |
  |          | C-x ^     |                                | 往上加高buffer尺寸               |                    |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  | 目录模式 | n         |                                | 向下查看文件                     |                    |
  | C-x d    | p         |                                | 向上查看文件                     |                    |
  |          | >         |                                | 向下查看目录                     |                    |
  |          | <         |                                | 向上查看目录                     |                    |
  |          | ^         |                                | 返回上一级目录                   |                    |
  |          | M-(       |                                | 向下查看已标记                   |                    |
  |          | M-)       |                                | 向上查看已标记                   |                    |
  |          | g         |                                | 刷新                             |                    |
  |          | s         |                                | 切换名称/日期排序方式            |                    |
  |          | i         |                                | 当前窗口下面打开该子目录         |                    |
  |          | v         |                                | 查看当前文件（当前窗口）         |                    |
  |          | o         |                                | 查看当前文件（另一窗口）         |                    |
  |          | y         |                                | 查看当前文件类型                 |                    |
  |          | 等号      |                                | 比较文件，相当于shell下的diff    |                    |
  |          | m         |                                | 标记（mark）                     |                    |
  |          | u         |                                | 取消标记                         |                    |
  |          | U         |                                | 取消所有标记                     |                    |
  |          | * /       |                                | 标记所有文件夹                   |                    |
  |          | * *       |                                | 标记所有可执行文件               |                    |
  |          | * @       |                                | 标记所有符号链接                 |                    |
  |          | * c       |                                | 改变标记的符号                   |                    |
  |          | % m       |                                | 根据正则表达式改变标记文件       |                    |
  |          | % g       |                                | 根据正则表达式改变标记文件的内容 |                    |
  |          | d         |                                | 标记为删除                       |                    |
  |          | ~         |                                | 标记所有备份文件为删除           |                    |
  |          | #         |                                | 将存盘文件标记为删除             |                    |
  |          | & d       |                                | 根据正则表达式标记删除           |                    |
  |          | X         |                                | 执行标记的操作                   |                    |
  |          | +         |                                | 新建目录                         |                    |
  |          | C-x C-q   |                                | 将文件列表设置为只读             |                    |
  |          | D         |                                | 删除文件                         | 标记（m）后的操作  |
  |          | C         |                                | 拷贝                             | 标记（m）后的操作  |
  |          | O         |                                | 改变用户                         | 标记（m）后的操作  |
  |          | G         |                                | 改变群组                         | 标记（m）后的操作  |
  |          | S         |                                | 符号链接                         | 标记（m）后的操作  |
  |          | H         |                                | 硬链接                           | 标记（m）后的操作  |
  |          | Z         |                                | 压缩                             | 标记（m）后的操作  |
  |          | W         |                                | 复制文件名                       | 标记（m）后的操作  |
  |          | K         |                                | 删除行，刷新后可恢复             | 标记（m）后的操作  |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
  |          |           | revert-buffer                  | 刷新buffer                       |                    |
  |          |           | emacs -q                       | 进入emacs默认最小配置            | 启动emacs时使用    |
  |          |           | eval-current-buffer            | 当前配置立马生效                 |                    |
  |          |           | rename-buffer                  | 重命名当前buffer                 |                    |
  |----------+-----------+--------------------------------+----------------------------------+--------------------|
*** 其他
- 在eshell中使用$PATH$可以输出当前emacs的路径path；
- 查询当前模式:C-h m或者M-x describe-mode ;
- el源文件编译:对于emacs某些包，有生成的elc的编译文件，emacs启动时，调用elc启动速度会更快，但是如果修改了源文件el，则可
  以使用M-x：byte-recompile-directory来重新编译，才能将修改的地方起作用。比如org mode中修改latex的生成模式函数
  org-export-latex-make-header
- 右键菜单配置打开命令：在注册表\HKEY\_CLASSES\_ROOT\AllFilesystemObjects\shell\下面新建一项Emacs，再在下面新建command项，
  看起来应该是这样：\HKEY\_CLASSES\_ROOT\AllFilesystemObjects\shell\Emacs\command\ 然后把command项右边的默认值设为
  Path\gnuclientw.exe，并加上"%1"
- emacs配置立马生效: 可以M-x eval-current-buffer立马生效;
*** 计算器
- 计算器模式1：M-x calc进入，输入"10"回车"d2，这个d2会把窗口中的所有数字显示为二进制形式，所有的数字都会以"2#"开头,以表
  示它们是二进制形式。如果要重新用十进制显示，则输入"d0"即可，同样，也可以用"d8""，"d6"来显示八进制和十六进制的格式。如
  果要进行进制转换，比如讲二进制的1010转换为十六进制，可以这样先d6设定16进制模式，然后再minibuffer中输入2#1010，回车；
- 计算器模式2：M-x quick-calc进入，启动后会在minibuffer里提示输入数学计算式，回车就显示结果；
*** 图片
- 导入图片见图\ref{img-pic-test}:可以通过调节width=.1\ linewidth来限制图片输出的大小, 其中.1表示倍率，或者使用scale=0.2
  进行调节
  #+caption: emacs导图测试 
  #+label: img-pic-test
  #+attr_latex: placement=[H] scale=0.2
  [[./img/emacs1.jpg]]
*** 字体
- eshell 查看系统字体:eshell:fc-list(或者fc-list.exe) (空格) :lang=zh-cn
*** 编码
- 设置编码格式:使用快捷键：C-x RET f 然后可以用 TAB 显示所有存在的编码。这个命令会改变文件！如果只是出现乱码，并且不想改
  变文件本身，可以用命令C-x RET r ( M-x revert-buffer-with-coding-system)来用指定的编码重新读入这个文件。不改变当前文件
  编码，但将该文件另存为utf-8编码格式：C-x RET c(M-x universal-coding-system-argument ) utf-8
- 对于org-mode导出HTML时，如果org-mode是gbk/utf-8，则导出的HTML也是gbk/utf-8；
** org-mode
# <<org-mode>>
- 字体：试试 *粗体* ，试试 /斜体/ ,  试试删除线  +删除线+ ，试试 _下划线_, 试试下标 H_{2}O 试试上标 E=mc^2 ，等宽字体 =git=
- 插入公式：
  1. 公式：在本行，$a^2+b^2=c^2$
  2. 公式：在本行，\(a^2 + b^2 = c^2\)
  3. 公式：单独成行。$$a^2 + b^2 = c^2$$
  4. 公式：单独成行。\[a^2 + b^2 = c^2\]
  5. 公式：在本行，\(\sqrt{2}\)
  6. 和公式：$$a=\sum_{i=0}^{n}a_{i}$$
  7. 分数公式：$$\frac{x}{y}$$
- 表格计算：
  + 行表示：第2行：@2;
  + 列表示：第2列：$2;
  + 表格表示：第2行第2列：@2$2, 或者B2;
  + 打开表格符号帮助：C-c ?;
  + 显示行列帮助：C-c };
  + 公式引用：在表格下方的计算公式上使用C-c C-c，或者在表格中使用C-u C-c *;
  + 表格中输入计算公式：在表格中使用=表示列计算方式，使用:=表格单个表格计算公式；
  + 在minibuffer中输入公式：列计算模式C-c =，表格计算模式C-u C-c = ;
  + 在单独的buffer中输入公式：C-c ';
  + 求平均值函数vmean:例如:=vmean($2..$3)；
- org-mode转换到pdf需要在org-mode文件中头部使用如下头;
  #+begin_src emacs-lisp
    #+title: 我的记事本
    #+author: lxc
    #+ latex_class: org-latex-pdf
    #+ latex: \newpage
  #+end_src
- 画图测试：如果要支持中文，org文档需为utf-8的格式，这是java调用ditaa.jar时的默认格式, 效果如图\ref{img-test}所示
  #+caption: 测试画图
  #+label: img-test
  #+attr_latex: placement=[H] scale=0.3
  #+begin_src ditaa :file ./img/img-zhongwen.png :cmdline -r -o
  +----------------+     +--------------+    /-----------\
  |  cBLU blue     |     |  cRED        |    |  cGRE     |
  |                |---> |  red         |--->|  green    |-------+
  +----------------+     +--------------+    \-----------/       |
                                                                 |
                            +------------------+  <--------------+
                            |    cBLU          |                 :
                            |    o item1       |                 |
                            |    o item2       |                 v
                            |    o item3       |   +--------------+
                            +------------------+   |   cRED       |
                                                   +--------------+
  #+end_src

- 插入gnuplot图片，见图\ref{img-gnuplot-test}所示：
  #+caption: 测试图
  #+label: img-gnuplot-test
  #+attr_latex: placement=[H] scale=0.5
  #+begin_src gnuplot :exports results :file e:/OneDrive/my-learn/img/img-gnuplot-test.png
  reset
  set title "Putting it All Together"
  set xlabel "X"
  set xrange [-8:8]
  set xtics -8,2,8
  set ylabel "Y"
  set yrange [-20:70]
  set ytics -20,10,70
  f(x) = x**2
  g(x) = x**3
  h(x) = 10*sqrt(abs(x))
  plot f(x) w lp lw 1, g(x) w p lw 2, h(x) w l lw 3
  #+end_src

- 由于org文档转换为latex文本时，中间需要软件iconv将之转换为utf-8格式，而org源文档是gbk格式，所以如果将org文档由gbk格式转
  换为了别的格式，比如utf-8，则需要修改iconv的转换命令，详细见org个配置文档“my-org-mode.el”
- 如果需要修改org文档中嵌入的代码宽度高度，可以修改"my-org-mode.el"中的如下
  代码"页边距"
  #+begin_src emacs-lisp
	\lstset{numbers=left, %设置行号位置
          numberstyle=\\tiny, %设置行号大小
	 		keywordstyle=\\color{blue}, %设置关键字颜色
	 		commentstyle=\\color[cmyk]{1,0,1,0}, %设置注释颜色
	        frame=single, %设置边框格式
	        escapeinside=``, %逃逸字符(1左面的键)，用于显示中文
	        breaklines, %自动折行
	        extendedchars=false, %解决代码跨页时,章节标题，页眉汉字不显示
	        xleftmargin=10em,xrightmargin=5em, aboveskip=0.5em, %设置页边距
	        tabsize=4, %设置tab空格数
	        showspaces=false} %不显示空格
  #+end_src
- 内部链接：只需要在某个需要链接到的地方使用# <<target>>，设置一个标点，再在使用的地方，使用像[[][]]这样的格式去定位标点，
  并给出描述符，或者直接使用快捷键C-c C-l添加该点，比如已经在org-mode标题处设置了标点，然后使用[[][]] 定位过去就是
  [[org-mode]], 并且可以使用C-c &返回来, 使用C-c C-o可以打开标点。
- 表格：可以使用table-mode，命令table-insert可以插入一个n行n列的表格，table-span-cell可以合并单元格。
** python-mode
- 进入交互python模式：进入某个buffer，M-x python-mode，然后C-c C-z即可进入交互模式，也可以在buffer里面写好程序，在C-c
  C-z直接运行buffer的代码；
* latex
** 方法
# - 固定latex插入的图片位置
#   #+begin_src latex
#     \subsubsection{\kai{metis的数据流图}}
#     \begin{figure}[H]%注意是大写的H哦
#         \centering
#         \includegraphics[width=1.2\textwidth]{eps/metis_dataflow.eps}
#         \caption{metis dataflow}
#         \label{metis_dataflaw}
#     \end{figure}
#   #+end_src
** 符号
*** 数学模式重音符号
[[./img/shuxuemoshizhongyinfu.jpg]]
*** 小写希腊字母
[[./img/xiaoxiexilazimu.jpg]]
*** 大写希腊字母
[[./img/daxiexilazimu.jpg]]
*** 二元关系符
可以在前面加上\ not来得到其否定形式。
[[./img/eryuanguanxifu.jpg]]
*** 二元运算符
[[./img/eryuanyunsuanfu.jpg]]
*** 大尺寸运算符
[[./img/dachicunyunsuanfu.jpg]]
*** 箭头
[[./img/jiantou.jpg]]
*** 定界符
[[./img/dingjiefu.jpg]]
*** 大尺寸定界符
[[./img/dachicundingjiefu.jpg]]
*** 其他符号
[[./img/qitafuhao.jpg]]
*** 非数学符号
[[./img/feishuxuefuhao.jpg]]
*** AMS定界符
[[./img/amsdingjiefu.jpg]]
*** AMS希腊和希伯来字母
[[./img/amsxilahexibolaizimu.jpg]]
*** AMS二元关系符
[[./img/amseryuanguanxifu.jpg]]
*** AMS箭头
[[./img/amsjiantou.jpg]]
*** AMS二元否定关系符和箭头
[[./img/amseryuanfoudingguanxifuhejiantou.jpg]]
*** AMS二元运算符
[[./img/amseryuanyunsuanfu.jpg]]
*** AMS其他符号
[[./img/amsqitafuhao.jpg]]
*** 微积分符号
1. \(\int_{0}^{n}\)
2. \(\sum_{i=0}^{n}\)
3. \(\sum\limits_{i=0}^{n}\)
4. \(\mathrm{d}x\)
* keil
- 设置emacs编辑器：在Customer Tools Menu菜单中，Command设置emacs路径，在Argument中!E代表编辑当前文件；在Menu Content中新
  建个命令emacs(&E), 括号里面的代表快捷键.
* iar
- 设置emacs编辑器：在Configure Tool中Menu Content中新建个命令emacs(&E), 括号里面的代表快捷键，在Command中设置emacs路径，
  在Argument中 \$FILE_PATH\$ 代表编辑当前文件.   

